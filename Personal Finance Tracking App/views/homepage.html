<!DOCTYPE html>
<html lang="en">
    <head>
       <meta charset="UTF-8">
       <title>Personal Finance Tracking</title>
        <link rel="stylesheet" href="homepage.css">
    </head>
    <body>
<div class="container" id="container">
    <div class="form-container sign-up-container">
        <form id="signUpForm">
            <h1>Create Account</h1>
            <input type="text" placeholder="Name" required />
            <input type="email" placeholder="Email" required />
            <input type="password" placeholder="Password" required />
            <button type="submit">Sign Up</button>
        </form>
    </div>
    <div class="form-container sign-in-container">
        <form id="signInForm">
            <h1>Sign in</h1>
            <input type="email" placeholder="Email" required />
            <input type="password" placeholder="Password" required />
            <button type="submit">Sign In</button>
        </form>
    </div>
    <div class="overlay-container">
        <div class="overlay">
            <div class="overlay-panel overlay-left">
                <h1>Welcome</h1>
                <p>Please click the button below to sign in and continue your financial tracking journey!</p>
                <button class="ghost" id="signIn">Sign In</button>
            </div>
            <div class="overlay-panel overlay-right">
                <h1>Welcome</h1>
                <p>To start tracking your personal financial journey click the Sign Up button below!</p>
                <button class="ghost" id="signUp">Sign Up</button>
            </div>
        </div>
    </div>
</div>
<script>
    const signUpButton = document.getElementById('signUp');
    const signInButton = document.getElementById('signIn');
    const container = document.getElementById('container');

    signUpButton.addEventListener('click', () => {
        container.classList.add("right-panel-active");
    });

    signInButton.addEventListener('click', () => {
        container.classList.remove("right-panel-active");
    });

    document.getElementById('signUpForm').addEventListener('submit', async (event) => {
        event.preventDefault();
        const name = event.target.querySelector('input[placeholder="Name"]').value;
        const email = event.target.querySelector('input[placeholder="Email"]').value;
        const password = event.target.querySelector('input[placeholder="Password"]').value;

        try {
            const response = await fetch('/api/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, email, password })
            });
            const data = await response.json();
            if (response.ok) {
                localStorage.setItem('loggedInUser', JSON.stringify({ name: data.name, email: data.email }));
                window.location.href = 'summary.html';
            } else {
                alert(data.error);
            }
        } catch (error) {
            alert('An error occurred. Please try again.');
        }
    });

    document.getElementById('signInForm').addEventListener('submit', async (event) => {
        event.preventDefault();
        const email = event.target.querySelector('input[placeholder="Email"]').value;
        const password = event.target.querySelector('input[placeholder="Password"]').value;

        try {
            const response = await fetch('/api/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });
            const data = await response.json();
            if (response.ok) {
                localStorage.setItem('loggedInUser', JSON.stringify({ name: data.name, email: data.email }));
                window.location.href = 'summary.html';
            } else {
                alert(data.error);
            }
        } catch (error) {
            alert('An error occurred. Please try again.');
        }
    });
</script>
</body>
</html>